<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Telegram WebApp Access</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: sans-serif;
      background: #020617;
      color: #e5e7eb;
      padding: 20px;
    }
    .box {
      background: #020617;
      border: 1px solid #1e293b;
      padding: 16px;
      border-radius: 10px;
      margin-top: 20px;
    }
    .allow { color: #22c55e; }
    .deny { color: #ef4444; }
  </style>
</head>
<body>

<h2>ğŸ” Telegram Mini App</h2>
<div id="result" class="box">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</div>

<script>
  // ØªØ­Ù‚Ù‚ Ø£ÙˆÙ„Ù‹Ø§ Ù…Ù† ÙˆØ¬ÙˆØ¯ WebApp
  if (!window.Telegram || !window.Telegram.WebApp) {
    document.getElementById("result").innerHTML = "<span class='deny'>âŒ ÙŠØ¬Ø¨ ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¯Ø§Ø®Ù„ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</span>";
    throw new Error("Not opened inside Telegram WebApp");
  }

  const tg = window.Telegram.WebApp;
  tg.ready();

  // ID Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ¨ÙŠØ§Ù†Ø§ØªÙ‡
  const user = tg.initDataUnsafe?.user;
  const result = document.getElementById("result");

  if (!user) {
    result.innerHTML = "<span class='deny'>âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span>";
    throw new Error("No Telegram User");
  }

  // ğŸ‘‡ Ù‡Ù†Ø§ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ù„Ù‡Ù…
  const ALLOWED_USERS = [
    123456789, // Ø¶Ø¹ IDs Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù‡Ù†Ø§
    987654321
  ];

  // Ø§Ù„ØªØ­Ù‚Ù‚
  if (ALLOWED_USERS.includes(user.id)) {
    result.innerHTML = `
      <span class="allow">âœ… ØªÙ… Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„</span><br><br>
      Ù…Ø±Ø­Ø¨Ù‹Ø§ <b>${user.first_name}</b><br>
      ID: <code>${user.id}</code>
    `;
  } else {
    result.innerHTML = `
      <span class="deny">â›” ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„</span><br>
      ID Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ: <code>${user.id}</code>
    `;
    // Ø¥ØºÙ„Ø§Ù‚ WebApp Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
    setTimeout(() => tg.close(), 3000);
  }
</script>

</body>
</html>
