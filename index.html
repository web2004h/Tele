<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Telegram Access Control</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body {
      font-family: sans-serif;
      background: #020617;
      color: #e5e7eb;
      padding: 20px;
    }
    .box {
      background: #020617;
      border: 1px solid #1e293b;
      padding: 16px;
      border-radius: 10px;
      margin-top: 20px;
    }
    .allow { color: #22c55e; }
    .deny { color: #ef4444; }
  </style>
</head>

<body>

<h2>ğŸ” Telegram Mini App</h2>

<div id="result" class="box">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</div>

<script>
  const tg = window.Telegram.WebApp;
  tg.ready();

  /* ===============================
     ğŸ‘‡ Ù…ÙƒØ§Ù† "Ù…Ù„Ù JSON" Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ
     =============================== */
  const ALLOWED_USERS = [
    123456789,
    987654321,
    555444333
  ];
  /* =============================== */

  const result = document.getElementById("result");
  const user = tg.initDataUnsafe?.user;

  if (!user) {
    result.innerHTML = "<span class='deny'>âŒ Ø§Ù„ØµÙØ­Ø© Ù„Ù… ØªÙÙØªØ­ Ù…Ù† Ø¯Ø§Ø®Ù„ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</span>";
    throw new Error("No Telegram User");
  }

  const userId = user.id;

  if (ALLOWED_USERS.includes(userId)) {
    result.innerHTML = `
      <span class="allow">âœ… ØªÙ… Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„</span><br><br>
      Ù…Ø±Ø­Ø¨Ù‹Ø§ <b>${user.first_name}</b><br>
      ID: <code>${userId}</code>
    `;
  } else {
    result.innerHTML = `
      <span class="deny">â›” ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„</span><br><br>
      ID Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ:<br>
      <code>${userId}</code>
    `;

    // Ù‚ÙÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    tg.close();
  }
</script>

</body>
</html>
